<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mire.cinema.repository.MovieMapper">


	<resultMap id="movieResultMap"
		type="Movie">
		<id property="movieNo" column="movie_no" />
		<result property="movieTitle" column="movie_title" />
		<result property="movieIntro" column="movie_intro" />
		<result property="movieActors" column="movie_actors" />
		<result property="movieGenre" column="movie_genre" />
		<result property="moviePlayTime" column="movie_PlayTime" />
		<result property="movieLimit" column="movie_limit" />
		<result property="movieDate" column="movie_date" />
		<result property="imageUuid" column="image_uuid" />
	</resultMap>

	<insert id="insertMovie">
		insert into movie (
		movie_no, movie_title,
		movie_intro, movie_actors, movie_genre, movie_playTime,
		movie_limit,
		movie_date, image_uuid
		)
		values (
		movie_seq.nextval, #{movieTitle},
		#{movieIntro}, #{movieActors}, #{movieGenre},
		#{moviePlayTime},
		#{movieLimit}, #{movieDate},
		#{imgUuid}
		)
	</insert>

	<select id="selectMovie" resultType="Movie">
		SELECT * FROM movie WHERE
		movie_no = #{movieNo}
	</select>

	<select id="getTotalList" resultType="Movie">
		SELECT * FROM movie
	</select>

	<select id="getPartList" resultType="Movie" parameterType="int">
		 <![CDATA[
 SELECT a.* from 
(SELECT a.*, rownum rn from 
    ( SELECT * from movie order by movie_no desc) a 
    where rownum <= #{end} ) a
where rn >= #{start}    

  ]]>
	</select>

	<select id="countMovie" resultType="int">
		SELECT count(*) FROM movie
	</select>

	<delete id="deleteMovie">
		delete from movie where movie_no = #{movieNo}
	</delete>

	<update id="updateMovie">

	</update>

</mapper>